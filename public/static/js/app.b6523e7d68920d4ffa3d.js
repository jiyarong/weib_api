webpackJsonp([1],{"1QN+":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card_detail"},[a("input",{staticClass:"btn btn-warning",attrs:{type:"button",value:"返回列表"},on:{click:function(e){t.goback()}}}),t._v(" "),"loading"==this.status?a("span",[t._v("正在加载数据...")]):a("div",[a("h2",{staticStyle:{color:"red"}},[a("img",{staticStyle:{width:"15%",height:"15%"},attrs:{src:this.host+this.card.picture.http_url}}),t._v("\n            "+t._s(this.card.name)+"("+t._s(this.card.raw_name)+")\n        ")]),t._v(" "),a("table",{staticClass:"table table-condensed table-hover "},[a("tbody",[a("tr",[a("th",{attrs:{width:"12%"}},[t._v("卡号：")]),t._v(" "),a("td",{attrs:{width:"12%"}},[t._v(t._s(this.card.card_code))]),t._v(" "),a("th",{attrs:{width:"12%"}},[t._v("工作号：")]),t._v(" "),a("td",{attrs:{width:"12%"}},[t._v(t._s(this.card.work_code))]),t._v(" "),a("th",{attrs:{width:"12%"}},[t._v("类别：")]),t._v(" "),a("td",{attrs:{width:"12%"}},[t._v(t._s(this.card.product.name)+"("+t._s(this.card.product.raw_name)+")")]),t._v(" "),a("th",{attrs:{width:"12%"}},[t._v("新类别：")]),t._v(" "),a("td",{attrs:{width:"12%"}},[t._v(t._s(this.card.new_product.name)+"("+t._s(this.card.new_product.raw_name)+")")])]),t._v(" "),a("tr",[a("th",[t._v("颜色：")]),t._v(" "),a("td",{style:{backgroundColor:this.card.color}}),t._v(" "),a("th",[t._v("WingType：")]),t._v(" "),a("td",[t._v(t._s(this.card.wing_type))]),t._v(" "),a("th",[t._v("卡片类型：")]),t._v(" "),a("td",[t._v(t._s(this.card.card_type))]),t._v(" "),a("th",[t._v("原始链接：")]),t._v(" "),a("td",[a("a",{attrs:{href:this.card.raw_url,target:"_blank"}},[t._v("点击查看")])])]),t._v(" "),a("tr",[a("th",[t._v("等级：")]),t._v(" "),a("td",[t._v(t._s(-1==this.card.level?"-":this.card.level))]),t._v(" "),a("th",[t._v("花费：")]),t._v(" "),a("td",[t._v(t._s(this.card.cost))]),t._v(" "),a("th",[t._v("灵魂值：")]),t._v(" "),a("td",[t._v(t._s(this.card.soul))]),t._v(" "),a("th",[t._v("攻击力：")]),t._v(" "),a("td",[t._v(t._s(-1==this.card.attack_value?"-":this.card.attack_value))])]),t._v(" "),a("tr",[a("th",[t._v("触发器：")]),t._v(" "),a("td",{attrs:{colspan:"3"}},[t._v(t._s(this.card.triggers.map(function(t){return t.raw_name}).join()))]),t._v(" "),a("th",[t._v("特征")]),t._v(" "),a("td",{attrs:{colspan:"3"}},[t._v(t._s(this.card.feature))])]),t._v(" "),a("tr",[a("th",[t._v("原始效果：")]),t._v(" "),a("td",{attrs:{colspan:"7"},domProps:{innerHTML:t._s(this.card.raw_content)}})]),t._v(" "),a("tr",[a("th",[t._v("翻译效果：")]),t._v(" "),this.editing?[a("td",{attrs:{colspan:"6"}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.card.content,expression:"card.content"}],staticStyle:{width:"100%",height:"100px"},domProps:{value:t.card.content},on:{input:function(e){e.target.composing||t.$set(t.card,"content",e.target.value)}}})]),a("td",[a("input",{attrs:{type:"button",value:"保存"},on:{click:function(e){t.save_content()}}}),t._v(" "),a("input",{attrs:{type:"button",value:"取消"},on:{click:function(e){t.edit_content()}}})])]:[a("td",{attrs:{colspan:"6"},domProps:{innerHTML:t._s(this.card.content)}}),t._v(" "),a("td",[a("input",{attrs:{type:"button",value:"修改"},on:{click:function(e){t.edit_content()}}})])]],2)])])])])},s=[],r={render:n,staticRenderFns:s};e.a=r},"3O4x":function(t,e,a){"use strict";function n(t){a("MGLu")}var s=a("GYXE"),r=a("1QN+"),o=a("VU/8"),i=n,c=o(s.a,r.a,!1,i,"data-v-7793e7c5",null);e.a=c.exports},"6IM9":function(t,e){},E54B:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card_list"},[a("table",{staticClass:"table"},[a("tbody",[a("tr",[a("td",{attrs:{width:"12%"}},[t._v("卡片名称:")]),t._v(" "),a("td",{attrs:{width:"12%"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.name_cont,expression:"name_cont"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.name_cont},on:{input:function(e){e.target.composing||(t.name_cont=e.target.value)}}})]),t._v(" "),a("td",{attrs:{width:"12%"}},[t._v("卡片号:")]),t._v(" "),a("td",{attrs:{width:"12%"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.card_code_cont,expression:"card_code_cont"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.card_code_cont},on:{input:function(e){e.target.composing||(t.card_code_cont=e.target.value)}}})]),t._v(" "),a("td",{attrs:{width:"12%"}},[t._v("卡片内容:")]),t._v(" "),a("td",{attrs:{width:"12%"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.content_cont,expression:"content_cont"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.content_cont},on:{input:function(e){e.target.composing||(t.content_cont=e.target.value)}}})]),t._v(" "),a("td",{attrs:{width:"12%"}},[t._v("特征:")]),t._v(" "),a("td",{attrs:{width:"12%"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.feature_cont,expression:"feature_cont"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.feature_cont},on:{input:function(e){e.target.composing||(t.feature_cont=e.target.value)}}})])]),t._v(" "),a("tr",[a("td",[t._v("产品名:")]),t._v(" "),a("td",{attrs:{colspan:"3"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.product_id_eq,expression:"product_id_eq"}],attrs:{name:"product_id_eq"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.product_id_eq=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}}),t._v(" "),t._l(t.products,function(e){return[a("option",{domProps:{value:e.id}},[t._v(t._s(e.name)+"("+t._s(e.raw_name.substring(0,30))+")")])]})],2)]),t._v(" "),a("td",[t._v("新产品名:")]),t._v(" "),a("td",{attrs:{colspan:"3"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.new_product_id_eq,expression:"new_product_id_eq"}],attrs:{name:"new_product_id_eq"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.new_product_id_eq=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}}),t._v(" "),t._l(t.new_products,function(e){return[a("option",{domProps:{value:e.id}},[t._v(t._s(e.name)+"("+t._s(e.raw_name.substring(0,30))+")")])]})],2)])]),t._v(" "),a("tr",[a("td",[t._v("触发器:")]),t._v(" "),a("td",{attrs:{colspan:"3"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.triggers_id_in,expression:"triggers_id_in"}],staticStyle:{width:"80%"},attrs:{name:"triggers_id_in",multiple:"",size:"5"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.triggers_id_in=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}}),t._v(" "),t._l(t.triggers,function(e){return[a("option",{domProps:{value:e.id}},[t._v(t._s(e.name)+"("+t._s(e.raw_name.substring(0,15))+")")])]})],2)]),t._v(" "),a("td",[t._v("攻击力>=")]),t._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.attack_value_gteq,expression:"attack_value_gteq"}],attrs:{type:"text"},domProps:{value:t.attack_value_gteq},on:{input:function(e){e.target.composing||(t.attack_value_gteq=e.target.value)}}})]),t._v(" "),a("td",[t._v("攻击力<=")]),t._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.attack_value_lteq,expression:"attack_value_lteq"}],attrs:{type:"text"},domProps:{value:t.attack_value_lteq},on:{input:function(e){e.target.composing||(t.attack_value_lteq=e.target.value)}}})])]),t._v(" "),a("tr",[a("td",[t._v("等级>=")]),t._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.level_gteq,expression:"level_gteq"}],attrs:{type:"text"},domProps:{value:t.level_gteq},on:{input:function(e){e.target.composing||(t.level_gteq=e.target.value)}}})]),t._v(" "),a("td",[t._v("等级<=")]),t._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.level_lteq,expression:"level_lteq"}],attrs:{type:"text"},domProps:{value:t.level_lteq},on:{input:function(e){e.target.composing||(t.level_lteq=e.target.value)}}})]),t._v(" "),a("td",[t._v("魂>=")]),t._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.soul_gteq,expression:"soul_gteq"}],attrs:{type:"text"},domProps:{value:t.soul_gteq},on:{input:function(e){e.target.composing||(t.soul_gteq=e.target.value)}}})]),t._v(" "),a("td",[t._v("魂<=")]),t._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.soul_lteq,expression:"soul_lteq"}],attrs:{type:"text"},domProps:{value:t.soul_lteq},on:{input:function(e){e.target.composing||(t.soul_lteq=e.target.value)}}})])]),t._v(" "),a("tr",[a("td",[t._v("cost>=")]),t._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.cost_gteq,expression:"cost_gteq"}],attrs:{type:"text"},domProps:{value:t.cost_gteq},on:{input:function(e){e.target.composing||(t.cost_gteq=e.target.value)}}})]),t._v(" "),a("td",[t._v("cost<=")]),t._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.cost_lteq,expression:"cost_lteq"}],attrs:{type:"text"},domProps:{value:t.cost_lteq},on:{input:function(e){e.target.composing||(t.cost_lteq=e.target.value)}}})])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"8"}},[a("div",{staticClass:"pull-right"},[a("input",{staticClass:"btn btn-primary",attrs:{type:"button",value:"搜索"},on:{click:t.search}}),t._v(" "),a("input",{staticClass:"btn btn-default",attrs:{type:"button",value:"清空"},on:{click:t.clear_search}})])])])])]),t._v(" "),a("paginate",{ref:"paginate",attrs:{"page-count":t.total_pages,"page-range":3,"margin-pages":2,"click-handler":t.clickCallback,"prev-text":"上一页","next-text":"下一页","container-class":"pagination","page-class":"page-item"}}),t._v(" "),a("span",[t._v("共计"+t._s(this.total_count)+"张")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"loading"==t.status,expression:"status=='loading'"}]},[t._v("正在加载数据...")]),t._v(" "),a("table",{staticClass:"table table-condensed table-hover table-striped",attrs:{width:"80%"}},[t._m(0),t._v(" "),a("tbody",[t._l(t.cards,function(e){return[a("tr",[a("td",[a("img",{attrs:{src:t.host+e.picture.http_url}})]),t._v(" "),a("td",[a("router-link",{attrs:{to:{name:"CardDetail",params:{id:e.id}}}},[t._v(t._s(e.name))])],1),t._v(" "),a("td",[a("router-link",{attrs:{to:{name:"CardDetail",params:{id:e.id}}}},[t._v(t._s(e.content))])],1)])]})],2)])],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticStyle:{"text-align":"center","vertical-align":"center"}},[a("tr",[a("td",[t._v("卡片")]),t._v(" "),a("td",[t._v("卡名")]),t._v(" "),a("td",[t._v("效果")])])])}],r={render:n,staticRenderFns:s};e.a=r},GYXE:function(t,e,a){"use strict";var n=a("mvHQ"),s=a.n(n);e.a={name:"CardDetail",data:function(){return{status:"loading",card:{content:""},host:"http://xiayuanyin.cn:4002",editing:!1}},methods:{goback:function(){this.$router.go(-1)},edit_content:function(){this.editing=!this.editing},save_content:function(){var t=this,e=this.host+"/api/v1/cards/"+this.$route.params.id;fetch(e,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:s()({content:this.card.content})}).then(function(t){return t.json()}).then(function(e){t.editing=!1}).catch(function(t){alert("更新失败")})},get_card:function(){var t=this,e=this.host+"/api/v1/cards/"+this.$route.params.id;fetch(e,{method:"GET",headers:{Accept:"application/json"}}).then(function(t){return t.json()}).then(function(e){console.log(e),t.card=e.card,t.status="loaded"})}},created:function(){this.get_card()}}},Knc2:function(t,e,a){"use strict";var n=a("ZgWQ"),s=a("E54B"),r=a("VU/8"),o=r(n.a,s.a,!1,null,null,null);e.a=o.exports},M93x:function(t,e,a){"use strict";function n(t){a("6IM9")}var s=a("xJD8"),r=a("e+aY"),o=a("VU/8"),i=n,c=o(s.a,r.a,!1,i,null,null);e.a=c.exports},MGLu:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("7+uW"),s=a("M93x"),r=a("YaEn");n.a.config.productionTip=!1,new n.a({el:"#app",router:r.a,template:"<App/>",components:{App:s.a}})},YaEn:function(t,e,a){"use strict";var n=a("7+uW"),s=a("/ocq"),r=a("Knc2"),o=a("3O4x");n.a.use(s.a),e.a=new s.a({routes:[{path:"/",name:"CardList",component:r.a,meta:{keepAlive:!0}},{path:"/cards/:id",name:"CardDetail",component:o.a}]})},ZgWQ:function(t,e,a){"use strict";var n=a("7+uW"),s=a("kBYy"),r=a.n(s);n.a.component("paginate",r.a),e.a={name:"CardList",data:function(){return{status:"loading",cards:[],page:1,total_pages:20,total_count:0,host:"http://xiayuanyin.cn:4002",products:[],new_products:[],triggers:[],name_cont:"",card_code_cont:"",content_cont:"",feature_cont:"",product_id_eq:"",new_product_id_eq:"",triggers_id_in:[],attack_value_gteq:"",attack_value_lteq:"",soul_gteq:"",soul_lteq:"",level_gteq:"",level_lteq:"",cost_gteq:"",cost_lteq:""}},methods:{clickCallback:function(t){this.$refs.paginate.selected=t-1,this.page=t,this.get_cards()},search:function(){this.page=1,this.$refs.paginate.selected=0,this.get_cards()},clear_search:function(){this.name_cont="",this.card_code_cont="",this.content_cont="",this.feature_cont="",this.product_id_eq="",this.new_product_id_eq="",this.triggers_id_in=[],this.attack_value_gteq="",this.attack_value_lteq="",this.soul_gteq="",this.soul_lteq="",this.level_gteq="",this.level_lteq="",this.cost_gteq="",this.cost_lteq=""},do_fetch:function(t){return fetch(t,{method:"GET",headers:{Accept:"application/json"}}).then(function(t){return t.json()})},get_cards:function(){var t=this;this.status="loading";var e=this.host+"/api/v1/cards?";e+="&page="+this.page,["name_cont","card_code_cont","content_cont","feature_cont","product_id_eq","new_product_id_eq","triggers_id_in","attack_value_gteq","attack_value_lteq","soul_gteq","soul_lteq","level_gteq","level_lteq","cost_gteq","cost_lteq"].forEach(function(a){e+="&"+a+"="+encodeURI(t[a])}),console.log(this.triggers_id_in),console.log(e),this.do_fetch(e).then(function(e){t.cards=e.cards,t.total_pages=e.meta.total_pages,t.total_count=e.meta.total_count,t.status="loaded"})},get_products:function(){var t=this,e=this.host+"/api/v1/products";this.do_fetch(e).then(function(e){t.products=e.products})},get_new_products:function(){var t=this,e=this.host+"/api/v1/new_products";this.do_fetch(e).then(function(e){t.new_products=e.new_products})},get_triggers:function(){var t=this,e=this.host+"/api/v1/triggers";this.do_fetch(e).then(function(e){t.triggers=e.triggers})}},created:function(){this.get_cards(),this.get_products(),this.get_new_products(),this.get_triggers()}}},"e+aY":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("keep-alive",{attrs:{include:"CardList"}},[a("router-view")],1)],1)},s=[],r={render:n,staticRenderFns:s};e.a=r},xJD8:function(t,e,a){"use strict";e.a={name:"app"}}},["NHnr"]);
//# sourceMappingURL=app.b6523e7d68920d4ffa3d.js.map